{% extends "base.html" %}
{% load static %}

{% block title %}Swordindex - 이커머스 검색 정확도 30% 향상 솔루션{% endblock %}

{% block meta_description %}AI 검색 솔루션으로 이커머스 검색 정확도 30% 향상, 이탈율 25% 감소, 고객 전환율 증가{% endblock %}

{% block meta_keywords %}AI 검색 솔루션, 이커머스 검색, 쇼핑몰 검색 최적화, 검색 정확도 향상, 이탈율 감소, 한국 이커머스, 중소기업 솔루션, 검색 엔진 최적화{% endblock %}

{% block og_title %}Swordindex - 이커머스 검색 정확도 30% 향상 솔루션{% endblock %}

{% block og_description %}AI 검색 솔루션으로 이커머스 검색 정확도 30% 향상, 이탈율 25% 감소, 고객 전환율 증가{% endblock %}

{% block extra_head %}
<!-- Google tag (gtag.js) -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Swordindex - AI 기반 검색 솔루션</title>
<!-- Favicon -->
<link rel="icon" href="{% static 'favicon/favicon.svg' %}" type="image/svg+xml">
<!-- Tailwind CSS via CDN -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- HTMX -->
<script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
<!-- Tailwind Config -->
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#375DE8',
                    dark: '#111111',
                    light: '#FFFFFF',
                }
            }
        }
    }
</script>
<!-- Custom CSS -->
<style>
    /* Carousel Styles */
    #carousel-inner {
        display: flex;
        transition: transform 0.5s ease-in-out;
        width: 100%;
    }
    
    #carousel-inner > div {
        width: 100%;
        flex: 0 0 100%;
    }
    
    .slide-indicator.active {
        background-color: white;
    }
    
    /* Image loading placeholder */
    .carousel-img-container {
        position: relative;
        background-color: #1a1a1a;
        width: 100%;
        height: 0;
        padding-bottom: 56.25%; /* 16:9 aspect ratio */
        overflow: hidden;
    }
    
    .carousel-img-container img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
    }
    
    .carousel-img-container img.loaded {
        opacity: 1;
    }
    
    .carousel-placeholder {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #375DE8;
        font-size: 1.5rem;
    }
</style>

<!-- Preload critical carousel images -->
<link rel="preload" href="{% static 'img/carousel/01.webp' %}" as="image" type="image/webp">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="py-16 md:py-24">
    <div class="container mx-auto px-4">
        <div class="max-w-3xl">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-6">
                검색, 더 스마트하게!<br>
                <span class="text-primary">AI 기반 검색</span> 솔루션으로<br>
                고객 전환율을 높이세요.
            </h1>
            <p class="text-lg md:text-xl text-gray-300 mb-8">
                AI 솔루션으로 고객이 원하는 상품을 정확하게 찾고, 구매 전환율을 높입니다.<br class="hidden md:block">
                지금까지의 검색과는 다른 고객이 찾지 못했던 제품을 AI가 추천해 드립니다.
            </p>
            <a href="#contact" class="inline-block bg-primary hover:bg-primary/90 text-white font-medium py-3 px-8 rounded-lg transition-all">
                문의하기
            </a>
        </div>
    </div>
</section>

<!-- Carousel Section -->
<section class="py-16 bg-black">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">
            이런 문제를 겪고 있나요?
        </h2>
        <div class="w-24 h-1 bg-primary mx-auto mb-16 rounded-full"></div>
        
        <!-- Carousel Container -->
        <div class="relative max-w-6xl mx-auto">
            <!-- Carousel Slides -->
            <div id="carousel" class="overflow-hidden rounded-xl shadow-2xl bg-black">
                <div class="flex w-full transition-transform duration-500 ease-in-out" id="carousel-inner" style="width: 100%; display: flex; flex-wrap: nowrap;">
                    <!-- Slide 1 -->
                    <div class="w-full flex-none" style="flex: 0 0 100%;">
                        <div class="carousel-img-container">
                            <div class="carousel-placeholder">
                                <svg class="animate-spin h-8 w-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            </div>
                            <picture>
                                <source srcset="{% static 'img/carousel/01.webp' %}" type="image/webp">
                                <img src="{% static 'img/carousel/01.png' %}" alt="Slide 1" class="carousel-image" loading="eager">
                            </picture>
                        </div>
                    </div>
                    <!-- Slide 2 -->
                    <div class="w-full flex-none" style="flex: 0 0 100%;">
                        <div class="carousel-img-container">
                            <div class="carousel-placeholder">
                                <svg class="animate-spin h-8 w-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            </div>
                            <picture>
                                <source srcset="{% static 'img/carousel/02.webp' %}" type="image/webp">
                                <img src="{% static 'img/carousel/02.png' %}" alt="Slide 2" class="carousel-image" loading="lazy">
                            </picture>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Arrows -->
            <button id="prev-btn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/20 hover:bg-black/40 text-white/60 hover:text-white/90 rounded-full p-2 focus:outline-none transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <button id="next-btn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/20 hover:bg-black/40 text-white/60 hover:text-white/90 rounded-full p-2 focus:outline-none transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
            
            <!-- Indicators -->
            <div class="flex justify-center mt-6 space-x-3">
                <button class="w-3 h-3 rounded-full bg-white slide-indicator" data-index="0"></button>
                <button class="w-3 h-3 rounded-full bg-white/50 slide-indicator" data-index="1"></button>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="py-16 bg-gradient-to-b from-black to-primary/10">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">
            AI 검색 솔루션, 이렇게 달라집니다!
        </h2>
        <div class="w-24 h-1 bg-primary mx-auto mb-16 rounded-full"></div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8" itemscope itemtype="http://schema.org/ItemList">
            <!-- Feature 1 -->
            <div class="bg-white rounded-xl p-8 hover:shadow-xl transition border border-primary/20 shadow-lg" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                <meta itemprop="position" content="1" />
                <div class="flex flex-col items-center text-center" itemprop="item" itemscope itemtype="http://schema.org/Service">
                    <div class="w-20 h-20 flex items-center justify-center bg-primary/20 rounded-full mb-6">
                        <img src="{% static 'img/icon1.png' %}" alt="유사 상품 자동 추천" class="w-12 h-12">
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-dark" itemprop="name">유사 상품 자동<br>추천</h3>
                    <p class="text-gray-600" itemprop="description">고객이 정확한 키워드를 입력하지 않아도 유사 상품 자동 추천</p>
                </div>
            </div>
            
            <!-- Feature 2 -->
            <div class="bg-white rounded-xl p-8 hover:shadow-xl transition border border-primary/20 shadow-lg" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                <meta itemprop="position" content="2" />
                <div class="flex flex-col items-center text-center" itemprop="item" itemscope itemtype="http://schema.org/Service">
                    <div class="w-20 h-20 flex items-center justify-center bg-primary/20 rounded-full mb-6">
                        <img src="{% static 'img/icon2.png' %}" alt="이탈율 감소" class="w-12 h-12">
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-dark" itemprop="name">이탈율 감소</h3>
                    <p class="text-gray-600" itemprop="description">쇼핑몰 검색 정확도 30% 향상, 이탈율 25% 감소</p>
                </div>
            </div>
            
            <!-- Feature 3 -->
            <div class="bg-white rounded-xl p-8 hover:shadow-xl transition border border-primary/20 shadow-lg" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                <meta itemprop="position" content="3" />
                <div class="flex flex-col items-center text-center" itemprop="item" itemscope itemtype="http://schema.org/Service">
                    <div class="w-20 h-20 flex items-center justify-center bg-primary/20 rounded-full mb-6">
                        <img src="{% static 'img/icon3.png' %}" alt="구매율 증가" class="w-12 h-12">
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-dark" itemprop="name">구매율 증가</h3>
                    <p class="text-gray-600" itemprop="description">AI 기반으로 검색 결과를 개인화하여 구매율 증가</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Key Features Section -->
<section class="py-16 bg-gradient-to-b from-primary/10 to-black">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">Key Features</h2>
            <div class="w-24 h-1 bg-primary mx-auto mb-6 rounded-full"></div>
            <p class="text-xl text-center text-white mb-12">고객이 원하는 검색 결과를 정확하게 제공해, 구매 전환율을 높이세요!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Key Feature 1 -->
                <div class="bg-white rounded-lg p-6 hover:shadow-xl transition-all duration-300 border border-primary/20 shadow-lg group">
                    <div class="flex items-start">
                        <div class="bg-primary/20 rounded-full p-3 mr-4 group-hover:bg-primary/30 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-primary mb-2">키워드 자동 보완</h3>
                            <p class="text-gray-600">오타가 있어도, 연관 상품 자동 추천</p>
                        </div>
                    </div>
                </div>
                
                <!-- Key Feature 2 -->
                <div class="bg-white rounded-lg p-6 hover:shadow-xl transition-all duration-300 border border-primary/20 shadow-lg group">
                    <div class="flex items-start">
                        <div class="bg-primary/20 rounded-full p-3 mr-4 group-hover:bg-primary/30 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-primary mb-2">AI 추천 검색어</h3>
                            <p class="text-gray-600">고객의 검색 패턴을 분석해 최적의 결과</p>
                        </div>
                    </div>
                </div>
                
                <!-- Key Feature 3 -->
                <div class="bg-white rounded-lg p-6 hover:shadow-xl transition-all duration-300 border border-primary/20 shadow-lg group">
                    <div class="flex items-start">
                        <div class="bg-primary/20 rounded-full p-3 mr-4 group-hover:bg-primary/30 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4" />
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-primary mb-2">개인 맞춤 검색 결과</h3>
                            <p class="text-gray-600">고객의 검색 패턴을 분석해 최적의 결과 제공</p>
                        </div>
                    </div>
                </div>
                
                <!-- Key Feature 4 -->
                <div class="bg-white rounded-lg p-6 hover:shadow-xl transition-all duration-300 border border-primary/20 shadow-lg group">
                    <div class="flex items-start">
                        <div class="bg-primary/20 rounded-full p-3 mr-4 group-hover:bg-primary/30 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-primary mb-2">유사 상품 추천</h3>
                            <p class="text-gray-600">고객이 원하는 제품을 더 빠르게 찾도록 지원</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-16 bg-black">
    <div class="container mx-auto px-4">
        <div class="max-w-2xl mx-auto bg-dark/30 rounded-xl p-8">
            <h2 class="text-3xl font-bold text-center mb-8">Contact us</h2>
            
            <form action="{% url 'asks:submit_form' %}" method="post" hx-post="{% url 'asks:submit_form' %}" hx-target="#form-response" hx-swap="outerHTML" class="space-y-6">
                {% csrf_token %}
                <!-- Company Field -->
                <div>
                    <label for="comp" class="block text-sm font-medium text-gray-300 mb-1">소속</label>
                    <input type="text" name="comp" id="comp" placeholder="소속을 입력해주세요"
                        class="w-full px-4 py-3 bg-black/50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                </div>

                <!-- Name Field -->
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-300 mb-1">이름*</label>
                    <input type="text" name="name" id="name" placeholder="이름을 입력해주세요" required
                        class="w-full px-4 py-3 bg-black/50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <!-- Email Field -->
                <div>
                    <label for="mail" class="block text-sm font-medium text-gray-300 mb-1">이메일*</label>
                    <input type="email" name="mail" id="mail" placeholder="메일을 입력해주세요" required
                        class="w-full px-4 py-3 bg-black/50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <!-- Content Field -->
                <div>
                    <label for="cont" class="block text-sm font-medium text-gray-300 mb-1">문의내용*</label>
                    <textarea name="cont" id="cont" placeholder="문의내용을 입력해 주세요" required rows="4"
                        class="w-full px-4 py-3 bg-black/50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-y"></textarea>
                </div>
                
                <!-- Submit Button -->
                <div>
                    <button type="submit" 
                        class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-all">
                        문의하기
                    </button>
                </div>
                
                <div id="form-response"></div>
            </form>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<!-- Carousel JavaScript -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Get carousel elements
        const carousel = document.getElementById("carousel");
        const carouselInner = document.getElementById("carousel-inner");
        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        const indicators = document.querySelectorAll(".slide-indicator");
        
        // Check if carousel elements exist
        if (!carousel || !carouselInner) {
            console.log("Primary carousel elements not found");
            return;
        }
        
        console.log("Carousel found:", carousel);
        console.log("Carousel inner found:", carouselInner);
        
        let currentIndex = 0;
        const slideCount = carouselInner.children.length;
        
        console.log("Carousel initialized with", slideCount, "slides");
        
        // Handle image loading
        const carouselImages = document.querySelectorAll('.carousel-image');
        carouselImages.forEach((img) => {
            if (img.complete) {
                // Image already loaded (probably from cache)
                imageLoaded(img);
            } else {
                // Add load event listener
                img.addEventListener('load', function() {
                    imageLoaded(img);
                });
                
                // Add error handling
                img.addEventListener('error', function() {
                    handleImageError(img);
                });
            }
        });
        
        function imageLoaded(img) {
            img.classList.add('loaded');
            // Find and hide the placeholder
            const container = img.closest('.carousel-img-container');
            if (container) {
                const placeholder = container.querySelector('.carousel-placeholder');
                if (placeholder) {
                    placeholder.style.display = 'none';
                }
            }
        }
        
        function handleImageError(img) {
            console.error('Failed to load image:', img.src);
            // Find and update the placeholder to show error
            const container = img.closest('.carousel-img-container');
            if (container) {
                const placeholder = container.querySelector('.carousel-placeholder');
                if (placeholder) {
                    placeholder.innerHTML = '<div class="text-red-500">Image failed to load</div>';
                }
            }
        }
        
        // Initialize carousel
        updateCarousel();
        
        // Next slide button
        if (nextBtn) {
            nextBtn.addEventListener("click", function() {
                console.log("Next button clicked");
                currentIndex = (currentIndex + 1) % slideCount;
                updateCarousel();
            });
        }
        
        // Previous slide button
        if (prevBtn) {
            prevBtn.addEventListener("click", function() {
                console.log("Prev button clicked");
                currentIndex = (currentIndex - 1 + slideCount) % slideCount;
                updateCarousel();
            });
        }
        
        // Indicator buttons
        if (indicators.length > 0) {
            indicators.forEach((indicator, idx) => {
                indicator.addEventListener("click", function() {
                    console.log("Indicator clicked:", idx);
                    currentIndex = parseInt(this.dataset.index || idx);
                    updateCarousel();
                });
            });
        }
        
        // Touch and swipe support for mobile
        let touchStartX = 0;
        let touchEndX = 0;
        
        // Touch start event
        carousel.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        
        // Touch end event
        carousel.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, { passive: true });
        
        // Handle swipe direction
        function handleSwipe() {
            const swipeThreshold = 50; // Minimum distance to consider as swipe
            const swipeDistance = touchEndX - touchStartX;
            
            // Check if swipe distance exceeds threshold
            if (Math.abs(swipeDistance) < swipeThreshold) {
                return; // Not a significant swipe
            }
            
            console.log("Swipe detected:", swipeDistance);
            
            if (swipeDistance > 0) {
                // Swipe right - go to previous slide
                currentIndex = (currentIndex - 1 + slideCount) % slideCount;
            } else {
                // Swipe left - go to next slide
                currentIndex = (currentIndex + 1) % slideCount;
            }
            
            updateCarousel();
        }
        
        // Function to update carousel position and indicators
        function updateCarousel() {
            console.log("Updating carousel to index:", currentIndex);
            
            // Update slide position
            carouselInner.style.transform = `translateX(-${currentIndex * 100}%)`;
            
            // Update indicators
            if (indicators.length > 0) {
                indicators.forEach((indicator, index) => {
                    if (index === currentIndex) {
                        indicator.classList.add("bg-white");
                        indicator.classList.remove("bg-white/50");
                    } else {
                        indicator.classList.remove("bg-white");
                        indicator.classList.add("bg-white/50");
                    }
                });
            }
            
            // Preload the next image if it exists
            const nextIndex = (currentIndex + 1) % slideCount;
            const nextSlide = carouselInner.children[nextIndex];
            if (nextSlide) {
                const nextImg = nextSlide.querySelector('img');
                if (nextImg && nextImg.getAttribute('loading') === 'lazy') {
                    // Change to eager loading to trigger immediate load
                    nextImg.setAttribute('loading', 'eager');
                }
            }
        }
    });
</script>
{% endblock %} 